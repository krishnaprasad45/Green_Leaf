<%-include('./_header.ejs') -%>



    <!--header area start-->

    <!--offcanvas menu area start-->
    <div class="off_canvars_overlay">

    </div>


    <!--offcanvas menu area end-->
    <%-include('./_head_section.ejs') -%>

        <!--header area end-->

        <!--breadcrumbs area start-->
        <div class="breadcrumbs_area">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="breadcrumb_content">
                            <h3>Cart</h3>
                            <ul>
                                <li><a href="index.html">home</a></li>
                                <li>Shopping Cart</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--breadcrumbs area end-->

        <!--shopping cart area start -->
        <div class="shopping_cart_area mt-100">
            <div class="container">
                <form action="#">
                    <div class="row">
                        <div class="col-12">
                            <div class="table_desc">
                                <div class="cart_page table-responsive">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th class="product_remove">Delete</th>
                                                <th class="product_thumb">Image</th>
                                                <th class="product_name">Product</th>
                                                <th class="product-price">Price</th>
                                                <th class="product_quantity">Quantity</th>
                                                <th class="product_total">Total</th>
                                            </tr>
                                        </thead>
                                        <tbody id="cart-container">
                                            <% cart.forEach((item)=> { %>
                                                <tr id="row<%= item.product.id %>">
                                                    <input type="hidden" id="product_id<%= item.product.id %>"
                                                        value="<%= item.product.id %>">
                                                    <input type="hidden" name="cart_id" value="<%= item.id %>">
                                                    <td class="product_remove">
                                                        <a
                                                            onclick="removeCartalert('<%= item.product.id %>', '<%= item.id %>')">
                                                            <i class="fa fa-trash-o"></i>
                                                        </a>
                                                    </td>
                                                    <td class="product_thumb">
                                                        <a><img src="<%= item.product.imageUrl[0].url %>" alt=""></a>
                                                    </td>
                                                    <td class="product_name">
                                                        <%= item.product.product_name %>
                                                    </td>
                                                    <td class="product-price" id="product-price-<%= item.product.id %>">
                                                        <%= item.product.price %>/-
                                                    </td>
                                                    <td class="product_quantity"
                                                        id="product-quantity-<%= item.product.id %>">
                                                        <label>Quantity</label>
                                                        <input onclick="findTotal('<%= item.product.id %>')" min="1"
                                                            max="100" value="<%= item.quantity %>" type="number">
                                                    </td>
                                                    <td class="product_total" id="product_total-<%= item.product.id %>">
                                                    </td>
                                                </tr>
                                                <% }) %>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="cart_submit">
                                    <button type="submit">update cart</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--coupon code area start-->
                    <div class="coupon_area">
                        <div class="row">
                            <div class="col-lg-6 col-md-6">
                                <div class="coupon_code left">
                                    <h3>Coupon</h3>
                                    <div class="coupon_inner">
                                        <p>Enter your coupon code if you have one.</p>
                                        <input placeholder="Coupon code" type="text">
                                        <button type="submit">Apply coupon</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6">
                                <div class="coupon_code right">
                                    <h3>Cart Totals</h3>
                                    <div class="coupon_inner">
                                        <div class="cart_subtotal">
                                            <p>Subtotal</p>
                                            <p class="cart_amount subtotal-placeholder"></p>


                                        </div>
                                        <!-- <div class="cart_subtotal ">
                                            <p>Shipping</p>
                                            <p class="cart_amount"><span>Flat Rate:</span> Â£255.00</p>
                                        </div>
                                        <a href="#">Calculate shipping</a> -->

                                        <div class="cart_subtotal">
                                            <p>Total</p>
                                            <p class="cart_amount subtotal-placeholder"></p>

                                        </div>
                                        <div class="checkout_btn">
                                            <a href="/checkout">Proceed to Checkout</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--coupon code area end-->
                </form>
            </div>
        </div>
        <!--shopping cart area end -->

        <!--brand area start-->

        <!--brand area end-->

        <!--footer area start-->
        <%-include('./_footer.ejs') -%>









            <!--footer area end-->

            <!-- JS
============================================ -->
            <!--jquery min js-->
            <script src="assets/js/vendor/jquery-3.4.1.min.js"></script>
            <!--popper min js-->
            <script src="assets/js/popper.js"></script>
            <!--bootstrap min js-->
            <script src="assets/js/bootstrap.min.js"></script>
            <!--owl carousel min js-->
            <script src="assets/js/owl.carousel.min.js"></script>
            <!--slick min js-->
            <script src="assets/js/slick.min.js"></script>
            <!--magnific popup min js-->
            <script src="assets/js/jquery.magnific-popup.min.js"></script>
            <!--counterup min js-->
            <script src="assets/js/jquery.counterup.min.js"></script>
            <!--jquery countdown min js-->
            <script src="assets/js/jquery.countdown.js"></script>
            <!--jquery ui min js-->
            <script src="assets/js/jquery.ui.js"></script>
            <!--jquery elevatezoom min js-->
            <script src="assets/js/jquery.elevatezoom.js"></script>
            <!--isotope packaged min js-->
            <script src="assets/js/isotope.pkgd.min.js"></script>
            <!--slinky menu js-->
            <script src="assets/js/slinky.menu.js"></script>
            <!-- Plugins JS -->
            <script src="assets/js/plugins.js"></script>

            <!-- Main JS -->
            <script src="assets/js/main.js"></script>
            <script src="assets/js/user.js"></script>



            <script>
                // Function to update the product total
                function findTotal(productId) {
                    const priceElement = document.getElementById('product-price-' + productId);
                    const quantityElement = document.getElementById('product-quantity-' + productId).querySelector('input');

                    const price = parseFloat(priceElement.textContent.replace('/-', '')); // Extract the price from the inner text
                    const quantity = parseInt(quantityElement.value);

                    const total = price * quantity;

                    const totalElement = document.getElementById('product_total-' + productId);
                    totalElement.textContent = `${total}/-`; // Update the total in the HTML

                    // Call the calculateSubtotal function to update the subtotal
                    calculateSubtotal();
                }

                document.addEventListener('DOMContentLoaded', function () {
                    <% cart.forEach((item) => { %>
                    findTotal('<%= item.product.id %>');
                    <% }) %>
                });

            </script>
            <!-- ... Existing HTML code ... -->



            </body>



            </html>